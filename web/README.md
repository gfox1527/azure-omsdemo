# Sample Order Management Client

This sample application was bootstrapped with [Create React App](https://github.com/facebook/create-react-app) and is used to demonstrate distributed tracing via the [Application Insights JavaScript SDK](https://github.com/Microsoft/ApplicationInsights-JS).

## Prerequisites

TBD

## Local Development and Testing

### Configuration

Create a `.env.local` file at the project root and set the following values to match your environment:

```bash
REACT_APP_APPINSIGHTS_KEY=[your_application_insights_key]
REACT_APP_API_KEY=[your_api_management_subscription_key]
REACT_APP_REQUEST_URL=[url_to_orders_api_exposed_in_apim]
```

### Build and Start

In the project directory, you can run:

`npm install` - Installs dependencies. You can also use `yarn install`.

`npm start` - Runs the app in the development mode.

Open [http://localhost:3000](http://localhost:3000) to view it in the browser. The page will reload if you make edits. You will also see any lint errors in the console.

`npm test` - Launches the test runner in the interactive watch mode. See the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.

`npm run build` - Builds the app for production to the `build` folder. It correctly bundles React in production mode and optimizes the build for the best performance.

## Deployment (Azure)

This sample uses [Azure Static Web Apps](https://docs.microsoft.com/en-us/azure/static-web-apps/) for hosting in Azure. This service in turn uses GitHub actions to build, package, and deploy the site. Ensure this repository is cloned to a GitHub repo within an organization you control (i.e. your personal GitHub instance). Next, navigate to the **Settings** page in GitHub and select the **Secrets** section from the Options. Add two secrets:

* `API_KEY`: Set this value to a valid key from your API Management instance
* `APPINSIGHTS_KEY`: Set this value to the key generated by your instance of Application Insights

The GitHub Actions pipeline will use these secrets to populate a produciton .env file at build time so that the ReactJS application has the information it needs to send data and telemetry. This approach keeps these senstive values out of the source control repository.

Finally, [follow these instructions](https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=react#create-a-static-web-app) to create the static site and link it to your GitHub repository. Once the pipleline completes its initial run, the site will be available at the URL specified in the Azure portal.
